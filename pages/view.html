<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Visualizar Personagem</title>
  <link rel="stylesheet" href="../styles/style.css">
  <link rel="stylesheet" href="../styles/inventory.css">
</head>
<body>
  <header>
    <nav>
      <button onclick="window.location.href='../index.html'" class="btn btn-secondary">Voltar</button>
      <button onclick="window.location.href='edit.html?index=' + new URLSearchParams(window.location.search).get('index')" class="btn btn-primary">Editar</button>
    </nav>
  </header>
  <main>
    <!-- Contador de Resistência -->
    <div id="resistance-container" class="resistance-container">
      <div class="resistance-value-container">
        <input type="number" id="resistance-value" class="resistance-value-editable" value="20" min="0" max="99">
        <span class="resistance-separator">/</span>
        <input type="number" id="resistance-max" class="resistance-value-editable" value="20" min="1" max="99">
      </div>
      <div class="resistance-slider-container">
        <div id="health-bar-fill" class="health-bar-fill"></div>
        <input type="range" id="resistance-slider" class="resistance-slider" min="0" max="20" value="20" step="1">
      </div>
      <div class="resistance-buttons">
        <button id="decrease-resistance" class="btn btn-sm btn-danger">-</button>
        <button id="increase-resistance" class="btn btn-sm btn-primary">+</button>
      </div>
    </div>
    
    <div id="character-details"></div>
    
    <!-- Inventário do Personagem (inicialmente oculto) -->
    <div id="inventario-view" class="inventario-container" style="display: none;">
      <h3 class="inventario-titulo">🎒 Inventário</h3>
      <div id="inventario-items" class="inventario-lista">
        <!-- Os itens do inventário serão carregados aqui dinamicamente -->
      </div>
    </div>
    
    <div id="tracos-selecionados">
      <!-- Os traços selecionados serão exibidos aqui -->
    </div>
  </main>

  <!-- Toaster para rolagem de dados -->
  <div id="dados-toaster" class="dados-toaster">
    <div class="dados-toaster-header">
      <div class="dados-toaster-title">Rolagem de Dados</div>
      <button class="dados-toaster-close" onclick="document.getElementById('dados-toaster').classList.remove('show')">&times;</button>
    </div>
    <div class="dados-toaster-body">
      <!-- Conteúdo dos dados será inserido aqui -->
    </div>
  </div>

  <!-- Botão de Menu Mobile (Flutuante) -->
  <button id="mobile-menu-btn" class="mobile-menu-btn" aria-label="Abrir menu">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <rect x="3" y="3" width="7" height="7" rx="1"></rect>
      <rect x="14" y="3" width="7" height="7" rx="1"></rect>
      <rect x="14" y="14" width="7" height="7" rx="1"></rect>
      <rect x="3" y="14" width="7" height="7" rx="1"></rect>
    </svg>
  </button>

  <!-- Modal de Menu Mobile -->
  <div id="mobile-menu-modal" class="mobile-menu-modal">
    <div class="mobile-menu-content">
      <div class="mobile-menu-header">
        <h2>Menu de Navegação</h2>
        <button id="mobile-menu-close" class="mobile-menu-close">&times;</button>
      </div>
      <div class="mobile-menu-buttons">
        <button class="mobile-menu-item" data-section="estilos-habilidades">
          <span class="menu-icon">🏋️⚡</span>
          <span>Estilos & Habilidades</span>
        </button>
        <button class="mobile-menu-item" data-section="utensilio">
          <span class="menu-icon">🔧</span>
          <span>Utensílio</span>
        </button>
        <button class="mobile-menu-item" data-section="tracos">
          <span class="menu-icon">🎭</span>
          <span>Traços</span>
        </button>
        <button class="mobile-menu-item" data-section="inventario">
          <span class="menu-icon">🎒</span>
          <span>Inventário</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Modal para Adicionar/Editar Item do Inventário -->
  <div id="item-modal" class="item-modal">
    <div class="item-modal-content">
      <div class="item-modal-header">
        <h3 id="item-modal-title">Adicionar Item</h3>
        <button id="item-modal-close" class="item-modal-close">&times;</button>
      </div>
      <div class="item-modal-body">
        <form id="item-form">
          <div class="form-group">
            <label for="item-nome">Nome do Item</label>
            <input type="text" id="item-nome" required>
          </div>
          <div class="form-group">
            <label for="item-quantidade">Quantidade</label>
            <input type="number" id="item-quantidade" min="1" value="1" required>
          </div>
          <div class="form-group">
            <label for="item-descricao">Descrição (opcional)</label>
            <textarea id="item-descricao" rows="3"></textarea>
          </div>
          <div class="item-modal-actions">
            <button type="button" id="item-cancel-btn" class="btn btn-secondary">Cancelar</button>
            <button type="submit" class="btn btn-primary">Salvar</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="../scripts/common.js"></script>
  <script src="../scripts/view.js"></script>
</body>
</html>
